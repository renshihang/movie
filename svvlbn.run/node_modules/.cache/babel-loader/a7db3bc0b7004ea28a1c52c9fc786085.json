{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\n\nfunction getServiceIdentifierAsString(serviceIdentifier) {\n  if (typeof serviceIdentifier === \"function\") {\n    var _serviceIdentifier = serviceIdentifier;\n    return _serviceIdentifier.name;\n  } else if (typeof serviceIdentifier === \"symbol\") {\n    return serviceIdentifier.toString();\n  } else {\n    var _serviceIdentifier = serviceIdentifier;\n    return _serviceIdentifier;\n  }\n}\n\nexports.getServiceIdentifierAsString = getServiceIdentifierAsString;\n\nfunction listRegisteredBindingsForServiceIdentifier(container, serviceIdentifier, getBindings) {\n  var registeredBindingsList = \"\";\n  var registeredBindings = getBindings(container, serviceIdentifier);\n\n  if (registeredBindings.length !== 0) {\n    registeredBindingsList = \"\\nRegistered bindings:\";\n    registeredBindings.forEach(function (binding) {\n      var name = \"Object\";\n\n      if (binding.implementationType !== null) {\n        name = getFunctionName(binding.implementationType);\n      }\n\n      registeredBindingsList = registeredBindingsList + \"\\n \" + name;\n\n      if (binding.constraint.metaData) {\n        registeredBindingsList = registeredBindingsList + \" - \" + binding.constraint.metaData;\n      }\n    });\n  }\n\n  return registeredBindingsList;\n}\n\nexports.listRegisteredBindingsForServiceIdentifier = listRegisteredBindingsForServiceIdentifier;\n\nfunction alreadyDependencyChain(request, serviceIdentifier) {\n  if (request.parentRequest === null) {\n    return false;\n  } else if (request.parentRequest.serviceIdentifier === serviceIdentifier) {\n    return true;\n  } else {\n    return alreadyDependencyChain(request.parentRequest, serviceIdentifier);\n  }\n}\n\nfunction dependencyChainToString(request) {\n  function _createStringArr(req, result) {\n    if (result === void 0) {\n      result = [];\n    }\n\n    var serviceIdentifier = getServiceIdentifierAsString(req.serviceIdentifier);\n    result.push(serviceIdentifier);\n\n    if (req.parentRequest !== null) {\n      return _createStringArr(req.parentRequest, result);\n    }\n\n    return result;\n  }\n\n  var stringArr = _createStringArr(request);\n\n  return stringArr.reverse().join(\" --> \");\n}\n\nfunction circularDependencyToException(request) {\n  request.childRequests.forEach(function (childRequest) {\n    if (alreadyDependencyChain(childRequest, childRequest.serviceIdentifier)) {\n      var services = dependencyChainToString(childRequest);\n      throw new Error(ERROR_MSGS.CIRCULAR_DEPENDENCY + \" \" + services);\n    } else {\n      circularDependencyToException(childRequest);\n    }\n  });\n}\n\nexports.circularDependencyToException = circularDependencyToException;\n\nfunction listMetadataForTarget(serviceIdentifierString, target) {\n  if (target.isTagged() || target.isNamed()) {\n    var m_1 = \"\";\n    var namedTag = target.getNamedTag();\n    var otherTags = target.getCustomTags();\n\n    if (namedTag !== null) {\n      m_1 += namedTag.toString() + \"\\n\";\n    }\n\n    if (otherTags !== null) {\n      otherTags.forEach(function (tag) {\n        m_1 += tag.toString() + \"\\n\";\n      });\n    }\n\n    return \" \" + serviceIdentifierString + \"\\n \" + serviceIdentifierString + \" - \" + m_1;\n  } else {\n    return \" \" + serviceIdentifierString;\n  }\n}\n\nexports.listMetadataForTarget = listMetadataForTarget;\n\nfunction getFunctionName(v) {\n  if (v.name) {\n    return v.name;\n  } else {\n    var name_1 = v.toString();\n    var match = name_1.match(/^function\\s*([^\\s(]+)/);\n    return match ? match[1] : \"Anonymous function: \" + name_1;\n  }\n}\n\nexports.getFunctionName = getFunctionName;","map":{"version":3,"sources":["/Users/renshihang/Desktop/svvlbn.run/node_modules/inversify/lib/utils/serialization.js"],"names":["Object","defineProperty","exports","value","ERROR_MSGS","require","getServiceIdentifierAsString","serviceIdentifier","_serviceIdentifier","name","toString","listRegisteredBindingsForServiceIdentifier","container","getBindings","registeredBindingsList","registeredBindings","length","forEach","binding","implementationType","getFunctionName","constraint","metaData","alreadyDependencyChain","request","parentRequest","dependencyChainToString","_createStringArr","req","result","push","stringArr","reverse","join","circularDependencyToException","childRequests","childRequest","services","Error","CIRCULAR_DEPENDENCY","listMetadataForTarget","serviceIdentifierString","target","isTagged","isNamed","m_1","namedTag","getNamedTag","otherTags","getCustomTags","tag","v","name_1","match"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nfunction getServiceIdentifierAsString(serviceIdentifier) {\n    if (typeof serviceIdentifier === \"function\") {\n        var _serviceIdentifier = serviceIdentifier;\n        return _serviceIdentifier.name;\n    }\n    else if (typeof serviceIdentifier === \"symbol\") {\n        return serviceIdentifier.toString();\n    }\n    else {\n        var _serviceIdentifier = serviceIdentifier;\n        return _serviceIdentifier;\n    }\n}\nexports.getServiceIdentifierAsString = getServiceIdentifierAsString;\nfunction listRegisteredBindingsForServiceIdentifier(container, serviceIdentifier, getBindings) {\n    var registeredBindingsList = \"\";\n    var registeredBindings = getBindings(container, serviceIdentifier);\n    if (registeredBindings.length !== 0) {\n        registeredBindingsList = \"\\nRegistered bindings:\";\n        registeredBindings.forEach(function (binding) {\n            var name = \"Object\";\n            if (binding.implementationType !== null) {\n                name = getFunctionName(binding.implementationType);\n            }\n            registeredBindingsList = registeredBindingsList + \"\\n \" + name;\n            if (binding.constraint.metaData) {\n                registeredBindingsList = registeredBindingsList + \" - \" + binding.constraint.metaData;\n            }\n        });\n    }\n    return registeredBindingsList;\n}\nexports.listRegisteredBindingsForServiceIdentifier = listRegisteredBindingsForServiceIdentifier;\nfunction alreadyDependencyChain(request, serviceIdentifier) {\n    if (request.parentRequest === null) {\n        return false;\n    }\n    else if (request.parentRequest.serviceIdentifier === serviceIdentifier) {\n        return true;\n    }\n    else {\n        return alreadyDependencyChain(request.parentRequest, serviceIdentifier);\n    }\n}\nfunction dependencyChainToString(request) {\n    function _createStringArr(req, result) {\n        if (result === void 0) { result = []; }\n        var serviceIdentifier = getServiceIdentifierAsString(req.serviceIdentifier);\n        result.push(serviceIdentifier);\n        if (req.parentRequest !== null) {\n            return _createStringArr(req.parentRequest, result);\n        }\n        return result;\n    }\n    var stringArr = _createStringArr(request);\n    return stringArr.reverse().join(\" --> \");\n}\nfunction circularDependencyToException(request) {\n    request.childRequests.forEach(function (childRequest) {\n        if (alreadyDependencyChain(childRequest, childRequest.serviceIdentifier)) {\n            var services = dependencyChainToString(childRequest);\n            throw new Error(ERROR_MSGS.CIRCULAR_DEPENDENCY + \" \" + services);\n        }\n        else {\n            circularDependencyToException(childRequest);\n        }\n    });\n}\nexports.circularDependencyToException = circularDependencyToException;\nfunction listMetadataForTarget(serviceIdentifierString, target) {\n    if (target.isTagged() || target.isNamed()) {\n        var m_1 = \"\";\n        var namedTag = target.getNamedTag();\n        var otherTags = target.getCustomTags();\n        if (namedTag !== null) {\n            m_1 += namedTag.toString() + \"\\n\";\n        }\n        if (otherTags !== null) {\n            otherTags.forEach(function (tag) {\n                m_1 += tag.toString() + \"\\n\";\n            });\n        }\n        return \" \" + serviceIdentifierString + \"\\n \" + serviceIdentifierString + \" - \" + m_1;\n    }\n    else {\n        return \" \" + serviceIdentifierString;\n    }\n}\nexports.listMetadataForTarget = listMetadataForTarget;\nfunction getFunctionName(v) {\n    if (v.name) {\n        return v.name;\n    }\n    else {\n        var name_1 = v.toString();\n        var match = name_1.match(/^function\\s*([^\\s(]+)/);\n        return match ? match[1] : \"Anonymous function: \" + name_1;\n    }\n}\nexports.getFunctionName = getFunctionName;\n"]},"metadata":{},"sourceType":"script"}