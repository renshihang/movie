{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\n\nvar metadata_1 = require(\"../planning/metadata\");\n\nvar traverseAncerstors = function (request, constraint) {\n  var parent = request.parentRequest;\n\n  if (parent !== null) {\n    return constraint(parent) ? true : traverseAncerstors(parent, constraint);\n  } else {\n    return false;\n  }\n};\n\nexports.traverseAncerstors = traverseAncerstors;\n\nvar taggedConstraint = function (key) {\n  return function (value) {\n    var constraint = function (request) {\n      return request !== null && request.target !== null && request.target.matchesTag(key)(value);\n    };\n\n    constraint.metaData = new metadata_1.Metadata(key, value);\n    return constraint;\n  };\n};\n\nexports.taggedConstraint = taggedConstraint;\nvar namedConstraint = taggedConstraint(METADATA_KEY.NAMED_TAG);\nexports.namedConstraint = namedConstraint;\n\nvar typeConstraint = function (type) {\n  return function (request) {\n    var binding = null;\n\n    if (request !== null) {\n      binding = request.bindings[0];\n\n      if (typeof type === \"string\") {\n        var serviceIdentifier = binding.serviceIdentifier;\n        return serviceIdentifier === type;\n      } else {\n        var constructor = request.bindings[0].implementationType;\n        return type === constructor;\n      }\n    }\n\n    return false;\n  };\n};\n\nexports.typeConstraint = typeConstraint;","map":{"version":3,"sources":["/Users/renshihang/Desktop/svvlbn.run/node_modules/inversify/lib/syntax/constraint_helpers.js"],"names":["Object","defineProperty","exports","value","METADATA_KEY","require","metadata_1","traverseAncerstors","request","constraint","parent","parentRequest","taggedConstraint","key","target","matchesTag","metaData","Metadata","namedConstraint","NAMED_TAG","typeConstraint","type","binding","bindings","serviceIdentifier","constructor","implementationType"],"mappings":"AAAA;;AACAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;;AACA,IAAIC,YAAY,GAAGC,OAAO,CAAC,4BAAD,CAA1B;;AACA,IAAIC,UAAU,GAAGD,OAAO,CAAC,sBAAD,CAAxB;;AACA,IAAIE,kBAAkB,GAAG,UAAUC,OAAV,EAAmBC,UAAnB,EAA+B;AACpD,MAAIC,MAAM,GAAGF,OAAO,CAACG,aAArB;;AACA,MAAID,MAAM,KAAK,IAAf,EAAqB;AACjB,WAAOD,UAAU,CAACC,MAAD,CAAV,GAAqB,IAArB,GAA4BH,kBAAkB,CAACG,MAAD,EAASD,UAAT,CAArD;AACH,GAFD,MAGK;AACD,WAAO,KAAP;AACH;AACJ,CARD;;AASAP,OAAO,CAACK,kBAAR,GAA6BA,kBAA7B;;AACA,IAAIK,gBAAgB,GAAG,UAAUC,GAAV,EAAe;AAAE,SAAO,UAAUV,KAAV,EAAiB;AAC5D,QAAIM,UAAU,GAAG,UAAUD,OAAV,EAAmB;AAChC,aAAOA,OAAO,KAAK,IAAZ,IAAoBA,OAAO,CAACM,MAAR,KAAmB,IAAvC,IAA+CN,OAAO,CAACM,MAAR,CAAeC,UAAf,CAA0BF,GAA1B,EAA+BV,KAA/B,CAAtD;AACH,KAFD;;AAGAM,IAAAA,UAAU,CAACO,QAAX,GAAsB,IAAIV,UAAU,CAACW,QAAf,CAAwBJ,GAAxB,EAA6BV,KAA7B,CAAtB;AACA,WAAOM,UAAP;AACH,GANuC;AAMpC,CANJ;;AAOAP,OAAO,CAACU,gBAAR,GAA2BA,gBAA3B;AACA,IAAIM,eAAe,GAAGN,gBAAgB,CAACR,YAAY,CAACe,SAAd,CAAtC;AACAjB,OAAO,CAACgB,eAAR,GAA0BA,eAA1B;;AACA,IAAIE,cAAc,GAAG,UAAUC,IAAV,EAAgB;AAAE,SAAO,UAAUb,OAAV,EAAmB;AAC7D,QAAIc,OAAO,GAAG,IAAd;;AACA,QAAId,OAAO,KAAK,IAAhB,EAAsB;AAClBc,MAAAA,OAAO,GAAGd,OAAO,CAACe,QAAR,CAAiB,CAAjB,CAAV;;AACA,UAAI,OAAOF,IAAP,KAAgB,QAApB,EAA8B;AAC1B,YAAIG,iBAAiB,GAAGF,OAAO,CAACE,iBAAhC;AACA,eAAOA,iBAAiB,KAAKH,IAA7B;AACH,OAHD,MAIK;AACD,YAAII,WAAW,GAAGjB,OAAO,CAACe,QAAR,CAAiB,CAAjB,EAAoBG,kBAAtC;AACA,eAAOL,IAAI,KAAKI,WAAhB;AACH;AACJ;;AACD,WAAO,KAAP;AACH,GAdsC;AAcnC,CAdJ;;AAeAvB,OAAO,CAACkB,cAAR,GAAyBA,cAAzB","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar metadata_1 = require(\"../planning/metadata\");\nvar traverseAncerstors = function (request, constraint) {\n    var parent = request.parentRequest;\n    if (parent !== null) {\n        return constraint(parent) ? true : traverseAncerstors(parent, constraint);\n    }\n    else {\n        return false;\n    }\n};\nexports.traverseAncerstors = traverseAncerstors;\nvar taggedConstraint = function (key) { return function (value) {\n    var constraint = function (request) {\n        return request !== null && request.target !== null && request.target.matchesTag(key)(value);\n    };\n    constraint.metaData = new metadata_1.Metadata(key, value);\n    return constraint;\n}; };\nexports.taggedConstraint = taggedConstraint;\nvar namedConstraint = taggedConstraint(METADATA_KEY.NAMED_TAG);\nexports.namedConstraint = namedConstraint;\nvar typeConstraint = function (type) { return function (request) {\n    var binding = null;\n    if (request !== null) {\n        binding = request.bindings[0];\n        if (typeof type === \"string\") {\n            var serviceIdentifier = binding.serviceIdentifier;\n            return serviceIdentifier === type;\n        }\n        else {\n            var constructor = request.bindings[0].implementationType;\n            return type === constructor;\n        }\n    }\n    return false;\n}; };\nexports.typeConstraint = typeConstraint;\n"]},"metadata":{},"sourceType":"script"}