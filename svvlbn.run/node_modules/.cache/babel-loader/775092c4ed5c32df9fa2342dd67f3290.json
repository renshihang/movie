{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\n\nvar id_1 = require(\"../utils/id\");\n\nvar metadata_1 = require(\"./metadata\");\n\nvar queryable_string_1 = require(\"./queryable_string\");\n\nvar Target = function () {\n  function Target(type, name, serviceIdentifier, namedOrTagged) {\n    this.id = id_1.id();\n    this.type = type;\n    this.serviceIdentifier = serviceIdentifier;\n    this.name = new queryable_string_1.QueryableString(name || \"\");\n    this.metadata = new Array();\n    var metadataItem = null;\n\n    if (typeof namedOrTagged === \"string\") {\n      metadataItem = new metadata_1.Metadata(METADATA_KEY.NAMED_TAG, namedOrTagged);\n    } else if (namedOrTagged instanceof metadata_1.Metadata) {\n      metadataItem = namedOrTagged;\n    }\n\n    if (metadataItem !== null) {\n      this.metadata.push(metadataItem);\n    }\n  }\n\n  Target.prototype.hasTag = function (key) {\n    for (var _i = 0, _a = this.metadata; _i < _a.length; _i++) {\n      var m = _a[_i];\n\n      if (m.key === key) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  Target.prototype.isArray = function () {\n    return this.hasTag(METADATA_KEY.MULTI_INJECT_TAG);\n  };\n\n  Target.prototype.matchesArray = function (name) {\n    return this.matchesTag(METADATA_KEY.MULTI_INJECT_TAG)(name);\n  };\n\n  Target.prototype.isNamed = function () {\n    return this.hasTag(METADATA_KEY.NAMED_TAG);\n  };\n\n  Target.prototype.isTagged = function () {\n    return this.metadata.some(function (m) {\n      return m.key !== METADATA_KEY.INJECT_TAG && m.key !== METADATA_KEY.MULTI_INJECT_TAG && m.key !== METADATA_KEY.NAME_TAG && m.key !== METADATA_KEY.UNMANAGED_TAG && m.key !== METADATA_KEY.NAMED_TAG;\n    });\n  };\n\n  Target.prototype.isOptional = function () {\n    return this.matchesTag(METADATA_KEY.OPTIONAL_TAG)(true);\n  };\n\n  Target.prototype.getNamedTag = function () {\n    if (this.isNamed()) {\n      return this.metadata.filter(function (m) {\n        return m.key === METADATA_KEY.NAMED_TAG;\n      })[0];\n    }\n\n    return null;\n  };\n\n  Target.prototype.getCustomTags = function () {\n    if (this.isTagged()) {\n      return this.metadata.filter(function (m) {\n        return m.key !== METADATA_KEY.INJECT_TAG && m.key !== METADATA_KEY.MULTI_INJECT_TAG && m.key !== METADATA_KEY.NAME_TAG && m.key !== METADATA_KEY.UNMANAGED_TAG && m.key !== METADATA_KEY.NAMED_TAG;\n      });\n    }\n\n    return null;\n  };\n\n  Target.prototype.matchesNamedTag = function (name) {\n    return this.matchesTag(METADATA_KEY.NAMED_TAG)(name);\n  };\n\n  Target.prototype.matchesTag = function (key) {\n    var _this = this;\n\n    return function (value) {\n      for (var _i = 0, _a = _this.metadata; _i < _a.length; _i++) {\n        var m = _a[_i];\n\n        if (m.key === key && m.value === value) {\n          return true;\n        }\n      }\n\n      return false;\n    };\n  };\n\n  return Target;\n}();\n\nexports.Target = Target;","map":{"version":3,"sources":["/Users/renshihang/Desktop/svvlbn.run/node_modules/inversify/lib/planning/target.js"],"names":["Object","defineProperty","exports","value","METADATA_KEY","require","id_1","metadata_1","queryable_string_1","Target","type","name","serviceIdentifier","namedOrTagged","id","QueryableString","metadata","Array","metadataItem","Metadata","NAMED_TAG","push","prototype","hasTag","key","_i","_a","length","m","isArray","MULTI_INJECT_TAG","matchesArray","matchesTag","isNamed","isTagged","some","INJECT_TAG","NAME_TAG","UNMANAGED_TAG","isOptional","OPTIONAL_TAG","getNamedTag","filter","getCustomTags","matchesNamedTag","_this"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar id_1 = require(\"../utils/id\");\nvar metadata_1 = require(\"./metadata\");\nvar queryable_string_1 = require(\"./queryable_string\");\nvar Target = (function () {\n    function Target(type, name, serviceIdentifier, namedOrTagged) {\n        this.id = id_1.id();\n        this.type = type;\n        this.serviceIdentifier = serviceIdentifier;\n        this.name = new queryable_string_1.QueryableString(name || \"\");\n        this.metadata = new Array();\n        var metadataItem = null;\n        if (typeof namedOrTagged === \"string\") {\n            metadataItem = new metadata_1.Metadata(METADATA_KEY.NAMED_TAG, namedOrTagged);\n        }\n        else if (namedOrTagged instanceof metadata_1.Metadata) {\n            metadataItem = namedOrTagged;\n        }\n        if (metadataItem !== null) {\n            this.metadata.push(metadataItem);\n        }\n    }\n    Target.prototype.hasTag = function (key) {\n        for (var _i = 0, _a = this.metadata; _i < _a.length; _i++) {\n            var m = _a[_i];\n            if (m.key === key) {\n                return true;\n            }\n        }\n        return false;\n    };\n    Target.prototype.isArray = function () {\n        return this.hasTag(METADATA_KEY.MULTI_INJECT_TAG);\n    };\n    Target.prototype.matchesArray = function (name) {\n        return this.matchesTag(METADATA_KEY.MULTI_INJECT_TAG)(name);\n    };\n    Target.prototype.isNamed = function () {\n        return this.hasTag(METADATA_KEY.NAMED_TAG);\n    };\n    Target.prototype.isTagged = function () {\n        return this.metadata.some(function (m) {\n            return (m.key !== METADATA_KEY.INJECT_TAG) &&\n                (m.key !== METADATA_KEY.MULTI_INJECT_TAG) &&\n                (m.key !== METADATA_KEY.NAME_TAG) &&\n                (m.key !== METADATA_KEY.UNMANAGED_TAG) &&\n                (m.key !== METADATA_KEY.NAMED_TAG);\n        });\n    };\n    Target.prototype.isOptional = function () {\n        return this.matchesTag(METADATA_KEY.OPTIONAL_TAG)(true);\n    };\n    Target.prototype.getNamedTag = function () {\n        if (this.isNamed()) {\n            return this.metadata.filter(function (m) { return m.key === METADATA_KEY.NAMED_TAG; })[0];\n        }\n        return null;\n    };\n    Target.prototype.getCustomTags = function () {\n        if (this.isTagged()) {\n            return this.metadata.filter(function (m) {\n                return (m.key !== METADATA_KEY.INJECT_TAG) &&\n                    (m.key !== METADATA_KEY.MULTI_INJECT_TAG) &&\n                    (m.key !== METADATA_KEY.NAME_TAG) &&\n                    (m.key !== METADATA_KEY.UNMANAGED_TAG) &&\n                    (m.key !== METADATA_KEY.NAMED_TAG);\n            });\n        }\n        return null;\n    };\n    Target.prototype.matchesNamedTag = function (name) {\n        return this.matchesTag(METADATA_KEY.NAMED_TAG)(name);\n    };\n    Target.prototype.matchesTag = function (key) {\n        var _this = this;\n        return function (value) {\n            for (var _i = 0, _a = _this.metadata; _i < _a.length; _i++) {\n                var m = _a[_i];\n                if (m.key === key && m.value === value) {\n                    return true;\n                }\n            }\n            return false;\n        };\n    };\n    return Target;\n}());\nexports.Target = Target;\n"]},"metadata":{},"sourceType":"script"}