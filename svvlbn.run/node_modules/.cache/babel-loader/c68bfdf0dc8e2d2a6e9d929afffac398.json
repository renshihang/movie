{"ast":null,"code":"import _initializerDefineProperty from \"@babel/runtime/helpers/initializerDefineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _applyDecoratedDescriptor from \"@babel/runtime/helpers/applyDecoratedDescriptor\";\nimport _initializerWarningHelper from \"@babel/runtime/helpers/initializerWarningHelper\";\n\nvar _dec, _dec2, _class, _descriptor, _descriptor2, _temp;\n\nimport { BlendType, lazyInject, TYPES } from '@antv/l7-core';\nimport { BlendTypes } from '../utils/blend';\nvar BaseModel = (_dec = lazyInject(TYPES.IGlobalConfigService), _dec2 = lazyInject(TYPES.IShaderModuleService), (_class = (_temp = function () {\n  function BaseModel(layer) {\n    _classCallCheck(this, BaseModel);\n\n    this.triangulation = void 0;\n    this.layer = void 0;\n\n    _initializerDefineProperty(this, \"configService\", _descriptor, this);\n\n    _initializerDefineProperty(this, \"shaderModuleService\", _descriptor2, this);\n\n    this.rendererService = void 0;\n    this.iconService = void 0;\n    this.fontService = void 0;\n    this.styleAttributeService = void 0;\n    this.mapService = void 0;\n    this.cameraService = void 0;\n    this.layerService = void 0;\n    this.layer = layer;\n    this.rendererService = layer.getContainer().get(TYPES.IRendererService);\n    this.styleAttributeService = layer.getContainer().get(TYPES.IStyleAttributeService);\n    this.mapService = layer.getContainer().get(TYPES.IMapService);\n    this.iconService = layer.getContainer().get(TYPES.IIconService);\n    this.fontService = layer.getContainer().get(TYPES.IFontService);\n    this.cameraService = layer.getContainer().get(TYPES.ICameraService);\n    this.layerService = layer.getContainer().get(TYPES.ILayerService);\n    this.registerBuiltinAttributes();\n    this.startModelAnimate();\n  }\n\n  _createClass(BaseModel, [{\n    key: \"getBlend\",\n    value: function getBlend() {\n      var _this$layer$getLayerC = this.layer.getLayerConfig(),\n          _this$layer$getLayerC2 = _this$layer$getLayerC.blend,\n          blend = _this$layer$getLayerC2 === void 0 ? 'normal' : _this$layer$getLayerC2;\n\n      return BlendTypes[BlendType[blend]];\n    }\n  }, {\n    key: \"getDefaultStyle\",\n    value: function getDefaultStyle() {\n      return {};\n    }\n  }, {\n    key: \"getUninforms\",\n    value: function getUninforms() {\n      throw new Error('Method not implemented.');\n    }\n  }, {\n    key: \"getAnimateUniforms\",\n    value: function getAnimateUniforms() {\n      return {};\n    }\n  }, {\n    key: \"needUpdate\",\n    value: function needUpdate() {\n      return false;\n    }\n  }, {\n    key: \"buildModels\",\n    value: function buildModels() {\n      throw new Error('Method not implemented.');\n    }\n  }, {\n    key: \"getAttribute\",\n    value: function getAttribute() {\n      throw new Error('Method not implemented.');\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      throw new Error('Method not implemented.');\n    }\n  }, {\n    key: \"registerBuiltinAttributes\",\n    value: function registerBuiltinAttributes() {\n      throw new Error('Method not implemented.');\n    }\n  }, {\n    key: \"animateOption2Array\",\n    value: function animateOption2Array(option) {\n      return [option.enable ? 0 : 1.0, option.duration || 4.0, option.interval || 0.2, option.trailLength || 0.1];\n    }\n  }, {\n    key: \"startModelAnimate\",\n    value: function startModelAnimate() {\n      var _ref = this.layer.getLayerConfig(),\n          animateOption = _ref.animateOption;\n\n      if (animateOption.enable) {\n        this.layer.setAnimateStartTime();\n      }\n    }\n  }]);\n\n  return BaseModel;\n}(), _temp), (_descriptor = _applyDecoratedDescriptor(_class.prototype, \"configService\", [_dec], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n}), _descriptor2 = _applyDecoratedDescriptor(_class.prototype, \"shaderModuleService\", [_dec2], {\n  configurable: true,\n  enumerable: true,\n  writable: true,\n  initializer: null\n})), _class));\nexport { BaseModel as default };","map":{"version":3,"sources":["../../src/core/BaseModel.ts"],"names":["BaseModel","triangulation","layer","lazyInject","TYPES","rendererService","iconService","fontService","styleAttributeService","mapService","cameraService","layerService","blend","BlendTypes","BlendType","option","animateOption"],"mappings":"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","sourcesContent":["import {\n  BlendType,\n  IAnimateOption,\n  IAttribute,\n  IBlendOptions,\n  ICameraService,\n  IElements,\n  IFontService,\n  IGlobalConfigService,\n  IIconService,\n  ILayer,\n  ILayerConfig,\n  ILayerModel,\n  ILayerService,\n  IMapService,\n  IModel,\n  IModelUniform,\n  IRendererService,\n  IShaderModuleService,\n  IStyleAttributeService,\n  lazyInject,\n  Triangulation,\n  TYPES,\n} from '@antv/l7-core';\nimport { BlendTypes } from '../utils/blend';\nexport default class BaseModel<ChildLayerStyleOptions = {}>\n  implements ILayerModel {\n  public triangulation: Triangulation;\n\n  protected layer: ILayer;\n\n  @lazyInject(TYPES.IGlobalConfigService)\n  protected readonly configService: IGlobalConfigService;\n\n  // @lazyInject(TYPES.IIconService)\n  // protected readonly iconService: IIconService;\n\n  // @lazyInject(TYPES.IFontService)\n  // protected readonly fontService: IFontService;\n\n  @lazyInject(TYPES.IShaderModuleService)\n  protected readonly shaderModuleService: IShaderModuleService;\n\n  protected rendererService: IRendererService;\n  protected iconService: IIconService;\n  protected fontService: IFontService;\n  protected styleAttributeService: IStyleAttributeService;\n  protected mapService: IMapService;\n  protected cameraService: ICameraService;\n  protected layerService: ILayerService;\n\n  constructor(layer: ILayer) {\n    this.layer = layer;\n    this.rendererService = layer\n      .getContainer()\n      .get<IRendererService>(TYPES.IRendererService);\n    this.styleAttributeService = layer\n      .getContainer()\n      .get<IStyleAttributeService>(TYPES.IStyleAttributeService);\n    this.mapService = layer.getContainer().get<IMapService>(TYPES.IMapService);\n    this.iconService = layer\n      .getContainer()\n      .get<IIconService>(TYPES.IIconService);\n    this.fontService = layer\n      .getContainer()\n      .get<IFontService>(TYPES.IFontService);\n    this.cameraService = layer\n      .getContainer()\n      .get<ICameraService>(TYPES.ICameraService);\n    this.layerService = layer\n      .getContainer()\n      .get<ILayerService>(TYPES.ILayerService);\n\n    // 注册 Attribute\n    this.registerBuiltinAttributes();\n    // 开启动画\n    this.startModelAnimate();\n  }\n  public getBlend(): IBlendOptions {\n    const { blend = 'normal' } = this.layer.getLayerConfig();\n    return BlendTypes[BlendType[blend]] as IBlendOptions;\n  }\n  public getDefaultStyle(): unknown {\n    return {};\n  }\n  public getUninforms(): IModelUniform {\n    throw new Error('Method not implemented.');\n  }\n\n  public getAnimateUniforms(): IModelUniform {\n    return {};\n  }\n\n  public needUpdate(): boolean {\n    return false;\n  }\n  public buildModels(): IModel[] {\n    throw new Error('Method not implemented.');\n  }\n  public getAttribute(): {\n    attributes: {\n      [attributeName: string]: IAttribute;\n    };\n    elements: IElements;\n  } {\n    throw new Error('Method not implemented.');\n  }\n  public render() {\n    throw new Error('Method not implemented.');\n  }\n  protected registerBuiltinAttributes() {\n    throw new Error('Method not implemented.');\n  }\n  protected animateOption2Array(option: IAnimateOption): number[] {\n    return [\n      option.enable ? 0 : 1.0,\n      option.duration || 4.0,\n      option.interval || 0.2,\n      option.trailLength || 0.1,\n    ];\n  }\n  protected startModelAnimate() {\n    const { animateOption } = this.layer.getLayerConfig() as ILayerConfig;\n    if (animateOption.enable) {\n      this.layer.setAnimateStartTime();\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"module"}